(()=>{"use strict";class e{constructor(e,t){this.id=e,this.title=t,this.tasks=[]}}class t{constructor(e,t,n,o){this.id=e,this.title=t,this.dueDate=n,this.priority=o}}const n=()=>null===JSON.parse(localStorage.getItem("project-list"))?[]:JSON.parse(localStorage.getItem("project-list")),o=e=>{localStorage.setItem("project-list",JSON.stringify(e))};function s(e){return+function(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}(e)>Date.now()}const c=(e,t)=>{const n=document.querySelector("#task-id-error");return e.tasks.some((e=>e.id===t))?(n.textContent=`Task with Id: ${t} exists`,!0):(n.textContent="",!1)},d=e=>{const t=document.querySelector("#date-error");return s(e)?(t.textContent="",!0):(t.textContent="Date must be in the future",!1)},l=()=>{const e=n(),t=document.querySelector(".dropdown-select");for(;t.lastChild;)t.removeChild(t.lastChild);const o=document.createElement("option");o.selected=!0,o.textContent="Select A Project",t.appendChild(o),e.forEach((e=>{const n=document.createElement("option");n.textContent=`${e.title}`,n.value=`${e.id}`,t.appendChild(n)}))},r=e=>{const t=document.querySelector(".list-group");for(;t.lastChild;)t.removeChild(t.lastChild);e.tasks.forEach((e=>{const s=document.createElement("li");s.classList.add("list-group-item"),s.classList.add("d-flex"),s.classList.add("justify-content-between"),s.classList.add("align-items-baseline");const c=document.createElement("h3");c.textContent=`Id: ${e.id}`;const d=document.createElement("h3");d.textContent=`Title: ${e.title}`;const l=document.createElement("p");l.textContent=`Due Date: ${e.dueDate}`;const a=document.createElement("p");a.textContent=`Priority: ${e.priority}`;const i=document.createElement("input");i.id="check-completed",i.classList.add("check-completed"),i.type="checkbox",i.onchange=()=>{i.checked?(c.classList.add("completed"),d.classList.add("completed"),l.classList.add("completed"),a.classList.add("completed")):(c.classList.remove("completed"),d.classList.remove("completed"),l.classList.remove("completed"),a.classList.remove("completed"))};const u=document.createElement("div");u.id=e.id,u.innerHTML='<i class="fa-solid fa-trash"></i>',u.addEventListener("click",(e=>{((e,t)=>{const s=n(),c=s.findIndex((t=>t.id===e)),d=s[c].tasks.findIndex((e=>e.id===t));s[c].tasks.splice(d,1),o(s),r(s[c])})(parseInt(document.querySelector(".dropdown-select").value),parseInt(u.id))}));const m=document.createElement("div");m.classList.add("d-flex"),m.classList.add("delete-trash-container"),m.appendChild(i),m.appendChild(u),s.appendChild(c),s.appendChild(d),s.appendChild(l),s.appendChild(a),s.appendChild(m),t.appendChild(s)}))};document.addEventListener("DOMContentLoaded",l),document.querySelector(".dropdown-select").addEventListener("change",(e=>{e.preventDefault();const t=parseInt(e.target.value),o=(s=t,n().find((e=>e.id===s)));var s;r(o)})),document.querySelector("#projects-form").addEventListener("submit",(t=>{t.preventDefault();const s=n(),c=document.querySelector(".project-name").value,d=parseInt(document.querySelector("#project-id").value),r=document.querySelector("#project-id-error");if(s.some((e=>e.id===d)))r.textContent=`Project with Id: ${d} exists`;else{r.textContent="";const t=new e(d,c);s.push(t),o(s),l()}})),document.querySelector("#tasks-form").addEventListener("submit",(e=>{e.preventDefault();const s=n(),l=parseInt(document.querySelector(".form-select").value),a=s.find((e=>e.id===l)),i=(e=>{const n=parseInt(document.querySelector("#task-id").value),o=document.querySelector("#task-title").value,s=document.querySelector("#due-date").value,l=document.querySelector("#task-priority").value;return c(e,n)?(console.log("Id matching tasks exists"),null):d(s)?new t(n,o,s,l):(console.log("Date must be in the future"),null)})(a);null!==i?(a.tasks.push(i),o(s)):console.log("Task was null"),r(a)}))})();